<!--components/email/email.wxml-->
<view wx:if="{{show}}" class="email-component">
  <!-- щВочо▒чК╢цАБцШ╛чд║хМ║хЯЯ -->
  <view class="email-status">
    <view class="email-info">
      <text class="email-icon">ЁЯУз</text>
      <view class="email-details">
        <text class="email-label">щВочо▒</text>
        <text class="email-value">{{currentEmail || 'цЬкшо╛ч╜о'}}</text>
      </view>
    </view>
    <view class="email-actions">
      <view
        wx:if="{{!showOperation}}"
        class="action-button {{currentEmail ? 'danger' : ''}}"
        bindtap="onStartOperation"
      >
        {{currentEmail ? 'шзгч╗С' : 'ч╗СхоЪ'}}
      </view>
    </view>
  </view>

  <!-- цУНф╜ЬчХМщЭв -->
  <view wx:if="{{showOperation}}" class="email-operation">
    <view class="operation-header">
      <text class="operation-title">{{action === 'bind' ? 'ч╗СхоЪщВочо▒' : 'шзгч╗СщВочо▒'}}</text>
      <view class="operation-close" bindtap="onCancelOperation">тЬХ</view>
    </view>

    <view class="operation-body">
      <!-- щВочо▒ш╛УхЕехМ║хЯЯ -->
      <view class="input-group">
        <text class="input-label">щВочо▒хЬ░хЭА</text>
        <input
          class="email-input {{action === 'bind' ? '' : 'readonly'}}"
          type="text"
          value="{{email}}"
          placeholder="{{action === 'bind' ? 'шп╖ш╛УхЕещВочо▒хЬ░хЭА' : ''}}"
          disabled="{{action === 'unbind'}}"
          bindinput="onEmailInput"
        />
        <view wx:if="{{action === 'bind'}}" class="email-validation">
          <text wx:if="{{email && !isValidEmail}}" class="validation-text invalid">щВочо▒ца╝х╝Пф╕Нцнгчбо</text>
          <text wx:if="{{email && isValidEmail}}" class="validation-text valid">щВочо▒ца╝х╝Пцнгчбо</text>
        </view>
      </view>

      <!-- щкМшпБчаБш╛УхЕехМ║хЯЯ -->
      <view class="input-group">
        <text class="input-label">щкМшпБчаБ</text>
        <view class="code-input-container">
          <input
            class="code-input"
            type="text"
            value="{{verificationCode}}"
            placeholder="шп╖ш╛УхЕещкМшпБчаБ"
            bindinput="onVerificationCodeInput"
          />
          <view
            class="send-code-btn {{sendCodeBtnDisabled ? 'disabled' : ''}}"
            bindtap="onSendVerificationCode"
          >
            {{sendCodeBtnText}}
          </view>
        </view>
      </view>
    </view>

    <!-- цУНф╜ЬцМЙщТо -->
    <view class="operation-footer">
      <view class="cancel-btn" bindtap="onCancelOperation">хПЦц╢И</view>
      <view class="confirm-btn" bindtap="onConfirm">чбошод</view>
    </view>
  </view>
</view>